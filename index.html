<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Why Recycling Campaigns Fail in Malaysia? | Qaiyum Thoughts</title>
    <!-- Load Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Lucide Icons for dynamic visuals -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Load Chart.js Library for Data Visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
    
    <style>
        /* Custom font and basic styling */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }

        /* Animation for fade-in elements */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }

        /* Chart container height for responsiveness */
        .chart-container {
            position: relative;
            height: 400px;
            width: 100%;
        }
    </style>
</head>
<body class="bg-stone-50 text-gray-800">

    <!-- --- FIREBASE MANDATORY SETUP (Placed here for immediate loading) --- -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        let app, db, auth;

        async function initFirebase() {
            try {
                if (Object.keys(firebaseConfig).length > 0) {
                    setLogLevel('Debug');
                    app = initializeApp(firebaseConfig);
                    db = getFirestore(app);
                    auth = getAuth(app);
                    
                    if (initialAuthToken) {
                        await signInWithCustomToken(auth, initialAuthToken);
                    } else {
                        await signInAnonymously(auth);
                    }
                }
            } catch (error) {
                console.error("Firebase Initialization or Sign-in Error:", error);
            }
        }
        window.onload = initFirebase;
    </script>
    
    <!-- Navigation Bar (Static part, rendered immediately) -->
    <nav id="main-nav" class="fixed top-0 w-full bg-white/95 backdrop-blur-md border-b border-stone-200 z-50 shadow-sm">
        <!-- Content will be populated by JS -->
    </nav>
    
    <!-- Hero Section -->
    <header id="intro" class="pt-32 pb-16 px-4 bg-gradient-to-b from-green-50 to-stone-50">
        <div class="max-w-3xl mx-auto text-center">
            
            <div class="mb-8 border-b border-green-200 pb-4">
                <h2 class="text-xl md:text-2xl font-bold text-green-800">
                    JUE 200 - English I Assignment
                </h2>
                <p class="text-sm text-gray-600 mt-1">
                    <span class="font-bold text-gray-800">Ahmad Qaiyum bin Razi</span> (Matric No: 23306180) | Universiti Sains Malaysia
                </p>
            </div>
            
            <span class="inline-block py-1 px-3 rounded-full bg-green-100 text-green-800 text-xs font-bold tracking-wide mb-4 uppercase">
                Opinion & Analytical Report
            </span>
            <h1 class="text-4xl md:text-5xl font-extrabold text-gray-900 mb-6 leading-tight">
                Why Recycling Campaigns Often <span class="text-red-600 underline decoration-4 decoration-red-200">Fail</span> in Malaysia?
            </h1>
            
            <p class="text-xl text-gray-600 mb-8 leading-relaxed font-light">
                The colorful bins are everywhere—sentinels standing guard in our neighborhoods. Yet, they remain largely empty or, worse, filled with general trash.
            </p>
            
            <div class="bg-white p-6 rounded-2xl shadow-xl border border-stone-100 max-w-sm mx-auto transform hover:-translate-y-1 transition-transform duration-300">
                <p class="text-xs text-gray-500 uppercase font-bold tracking-wider mb-2">Est. Daily Waste Generated (Tonnes)</p>
                <div class="text-4xl font-mono font-bold text-red-600 flex justify-center items-center gap-3">
                    <i data-lucide="trash-2" class="h-8 w-8 animate-pulse"></i>
                    <span id="waste-counter">38,000</span>
                </div>
                <p class="text-xs text-gray-400 mt-2 italic">*Based on national avg ~38k tonnes/day</p>
            </div>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="max-w-3xl mx-auto px-4 pb-20">
        
        <!-- Introduction & Thesis Statement -->
        <section class="prose prose-lg prose-stone mx-auto mb-16">
            <p class="leading-relaxed">
                <span class="text-5xl float-left mr-3 mt-[-10px] font-serif text-green-700 font-bold">M</span>
                alaysia has championed the 3Rs (Reduce, Reuse, Recycle) since the early 90s, recognizing the environmental and economic necessity of sustainable waste management. The nation's commitment is reflected in key policy frameworks, specifically the <em>Solid Waste and Public Cleansing Management Act 2007</em>, which aims for a fundamental shift in how we handle our massive daily waste generation. We have set ambitious targets, striving to reach a 40% recycling rate by 2025.
            </p>
            <p class="leading-relaxed border-l-4 border-green-500 pl-4 italic bg-green-50/50 py-2 rounded-r-lg">
                <strong>However, a critical disconnect remains.</strong> While public awareness campaigns are abundant, Malaysia's recycling initiatives often fail to achieve lasting compliance and efficiency due to three systemic flaws: <span class="text-green-800 font-semibold">inconsistent infrastructure and collection logistics</span>, <span class="text-green-800 font-semibold">a pervasive cultural mindset of reliance and apathy (Amah Syndrome)</span>, and <span class="text-green-800 font-semibold">a lack of rigorous regulatory enforcement and incentive structures</span>. These issues collectively ensure that recycling remains a burden rather than a habit.
            </p>
        </section>

        <!-- Visual Data Section -->
        <section id="reality" class="mb-20">
            <h2 class="text-2xl font-bold mb-6 flex items-center gap-2 text-gray-900">
                <i data-lucide="bar-chart-3" class="h-6 w-6 text-blue-600"></i>
                The Gap Between Policy and Reality
            </h2>
            
            <div class="grid md:grid-cols-2 gap-6">
                <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow">
                    <h3 class="font-semibold text-gray-700 mb-4">Target vs. Current Status</h3>
                    <div class="space-y-6">
                        <div>
                            <div class="flex justify-between text-sm mb-1 font-medium text-gray-600">
                                <span>2025 National Target</span>
                                <span class="text-green-700">40%</span>
                            </div>
                            <div class="h-3 bg-gray-100 rounded-full overflow-hidden">
                                <div class="h-full bg-green-500 w-[40%] rounded-full"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-sm mb-1 font-medium text-gray-600">
                                <span>Est. Effective Rate (2024)</span>
                                <span class="text-orange-600">~33%</span>
                            </div>
                            <div class="h-3 bg-gray-100 rounded-full overflow-hidden">
                                <div class="h-full bg-orange-400 w-[33%] rounded-full"></div>
                            </div>
                            <p class="text-xs text-gray-500 mt-2">
                                *Though official rates are rising, the total volume of waste generated continues to outpace recycling capacity growth.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="relative rounded-xl overflow-hidden border border-blue-100 shadow-sm group">
                    <div class="absolute inset-0 bg-gray-900"></div>
                    <div class="relative h-full p-6 flex flex-col justify-center items-center text-center z-10 min-h-48">
                        <p class="text-blue-100 font-bold uppercase text-xs tracking-wider mb-2">The Critical Stat</p>
                        <p class="text-6xl font-extrabold text-white mb-2 text-shadow-lg">90%</p>
                        <p class="text-sm text-blue-50 font-medium px-4">
                            of collected solid waste still ends up in landfills in many local municipalities due to ineffective sorting and high contamination rates at collection.
                        </p>
                    </div>
                </div>
            </div>
            
            <!-- CHART 1: Rate Trend and Forecast Container -->
            <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200 mt-6">
                <h3 class="font-semibold text-gray-700 mb-4 flex items-center gap-2">
                    <i data-lucide="bar-chart-3" class="h-5 w-5 text-red-600"></i>
                    Recycling Rate Trend & Regional Benchmark (2015-2035 Forecast)
                </h3>
                <p class="text-sm text-gray-500 mb-6">
                    Comparison of Malaysia's historical and forecasted rates against the national target and leading East/Southeast Asian nations.
                </p>
                
                <div class="chart-container">
                    <canvas id="recyclingRateChartCanvas"></canvas>
                </div>
            </div>

            <!-- CHART 2: Contamination Sunburst Container -->
            <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200 mt-6">
                <h3 class="font-semibold text-gray-700 mb-4 flex items-center gap-2">
                    <i data-lucide="layers" class="h-5 w-5 text-purple-600"></i>
                    Contamination Drop-Off by Material (Yield View)
                </h3>
                <p class="text-sm text-gray-500 mb-6">
                    The difference between collected volume and effectively recycled volume (the inner circle) is lost due to contamination (Wish-cycling).
                </p>
                
                <div id="material-visualizer" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-4 gap-4 justify-center">
                    <!-- Material sunbursts will be rendered here by JS -->
                </div>

                <!-- Legend for the chart -->
                <div class="mt-8 pt-4 border-t border-gray-100 flex justify-center gap-6 text-xs font-medium text-gray-600">
                    <div class="flex items-center gap-2">
                        <div class="w-4 h-4 rounded-full bg-gray-200"></div>
                        <span>Total Potential (100%)</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <div class="w-4 h-4 rounded-full bg-blue-300 opacity-60"></div>
                        <span>Collected (Outer Ring)</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <div class="w-4 h-4 rounded-full bg-blue-600"></div>
                        <span>Effectively Recycled (Inner Circle)</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Body Paragraphs: The 3 Reasons -->
        <section id="reasons" class="mb-20 space-y-8">
            <div class="text-center mb-10">
                <h2 class="text-3xl font-bold text-gray-900">The Structural Barriers</h2>
                <div class="w-20 h-1 bg-green-500 mx-auto mt-4 rounded-full"></div>
            </div>

            <!-- Reason 1: Infrastructure -->
            <div class="bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden flex flex-col md:flex-row group hover:border-orange-300 transition-colors">
                <div class="md:w-1/3 relative min-h-[200px] md:min-h-0 bg-orange-50 flex items-center justify-center">
                    <i data-lucide="building" class="h-24 w-24 text-orange-600/70"></i>
                </div>
                <div class="p-6 md:w-2/3">
                    <div class="flex items-center gap-3 mb-3">
                        <div class="bg-orange-100 p-2 rounded-lg text-orange-600">
                            <i data-lucide="alert-triangle" class="h-6 w-6"></i>
                        </div>
                        <h3 class="text-xl font-bold text-gray-800">1. The Accessibility and Logistics Gap</h3>
                    </div>
                    <p class="text-gray-600 mb-4 leading-relaxed">
                        The primary barrier to compliance is not apathy, but <strong>inconvenience</strong>. Collection systems are inconsistent, particularly in high-rise buildings where dedicated sorting areas are often an afterthought, and in rural areas where collection trucks are infrequent. When sustainable choices require significantly more effort than wasteful ones—such as driving sorted materials to a distant community center versus using a convenient trash chute—human nature favors convenience. This logistical failure discourages voluntary participation from the majority of the population.
                    </p>
                </div>
            </div>

            <!-- Reason 2: Wish-cycling & Amah Syndrome -->
            <div class="bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden flex flex-col md:flex-row group hover:border-purple-300 transition-colors">
                <div class="md:w-1/3 relative min-h-[200px] md:min-h-0 md:order-2 bg-purple-50 flex items-center justify-center">
                    <i data-lucide="users" class="h-24 w-24 text-purple-600/70"></i>
                </div>
                <div class="p-6 md:w-2/3 md:order-1">
                    <div class="flex items-center gap-3 mb-3">
                        <div class="bg-purple-100 p-2 rounded-lg text-purple-600">
                            <i data-lucide="lightbulb" class="h-6 w-6"></i>
                        </div>
                        <h3 class="text-xl font-bold text-gray-800">2. The Cultural Barrier: The "Amah Syndrome" and Apathy</h3>
                    </div>
                    <p class="text-gray-600 mb-4 leading-relaxed">
                        A deeper challenge lies in the collective community mindset, often described as the <strong>"Amah Syndrome."</strong> In many urban areas, public cleanliness and waste management are seen as the exclusive responsibility of government-contracted cleaning companies and foreign workers. This reliance fosters a psychological detachment, where citizens believe their duty ends when they place waste outside their home. If the task requires sorting, it is assumed the "cleaner" will handle it. This apathy, coupled with a lack of granular public education, leads directly to the <strong>Wish-cycling</strong> phenomenon: citizens toss questionable items into the bin with the hope they are recyclable, resulting in high contamination rates and the eventual landfill disposal of otherwise salvageable materials. Unless this mindset shifts, recycling will remain a specialized chore rather than a universal habit.
                    </p>
                </div>
            </div>

            <!-- Reason 3: Enforcement -->
            <div class="bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden flex flex-col md:flex-row group hover:border-red-300 transition-colors">
                <div class="md:w-1/4 bg-red-50 flex items-center justify-center p-6">
                    <i data-lucide="factory" class="h-16 w-16 text-red-500 group-hover:scale-110 transition-transform"></i>
                </div>
                <div class="p-6 md:w-3/4">
                    <div class="flex items-center gap-3 mb-3">
                        <h3 class="text-xl font-bold text-gray-800">3. Policy Without "Teeth"</h3>
                    </div>
                    <p class="text-gray-600 mb-4 leading-relaxed">
                        Despite mandatory separation laws, enforcement and penalty structures remain sporadic and largely unenforced. Without the 'stick' of consistent penalties for improper disposal—or the 'carrot' of tangible financial incentives like effective Pay-As-You-Throw schemes—voluntary compliance remains low. Furthermore, there is a distinct absence of Extended Producer Responsibility (EPR) legislation, which would hold manufacturers accountable for the full lifecycle of their packaging. The lack of accountability signals to both the public and corporations that recycling is optional rather than an essential, regulated responsibility.
                    </p>
                </div>
            </div>
        </section>
        
        <!-- NEW SECTION: The Paradox of Cleanups -->
        <section class="mb-20">
             <h2 class="text-2xl font-bold mb-6 flex items-center gap-2 text-gray-900 border-b pb-2">
                <i data-lucide="globe" class="h-6 w-6 text-indigo-600"></i>
                The Cleanup Paradox: When Good Intentions Meet Bad Infrastructure
            </h2>
            <div class="prose prose-lg prose-stone mx-auto">
                <p class="leading-relaxed">
                    The disconnect between public effort and systemic failure is perhaps most evident during organized cleanup activities. Non-Governmental Organizations (NGOs) and community groups frequently organize beach or town cleanups, dedicating hours to meticulously collecting, sorting, and segregating waste—often to teach children and residents the difference between plastics, glass, and e-waste.
                </p>
                <p class="leading-relaxed border-l-4 border-indigo-400 pl-4 italic bg-indigo-50/50 py-2 rounded-r-lg">
                    <strong>The unfortunate reality:</strong> In many cases, these diligently segregated items, representing maximum citizen effort and compliance, still end up co-mingled and sent to the landfill. The cleanup exercise becomes purely educational and symbolic, rather than operational.
                </p>
                <p class="leading-relaxed">
                    This happens because the cleanup activities often lack pre-arranged, specialized logistics with waste contractors. The existing government contracts are optimized for general waste removal, not for the irregular collection of segregated, large-volume materials from a one-off event. This systemic inability to handle even the highest quality segregated waste is deeply demoralizing, reinforces the "Amah Syndrome" (why bother if the system fails?), and ultimately dampens future volunteerism. The systemic gaps effectively nullify dedicated community effort.
                </p>
            </div>
        </section>


        <!-- Interactive Element: Knowledge Check -->
        <section id="quiz" class="bg-stone-900 text-stone-100 rounded-3xl p-8 md:p-12 mb-20 relative overflow-hidden shadow-2xl">
            <div class="absolute top-0 right-0 w-64 h-64 bg-green-600 rounded-full blur-[100px] opacity-20"></div>
            
            <div class="relative z-10 max-w-2xl mx-auto">
                <div class="text-center mb-8">
                    <span class="text-green-400 font-bold tracking-wider text-xs uppercase">Interactive Check</span>
                    <h3 class="text-2xl font-bold mt-2">Are you a "Wish-Cycler"?</h3>
                    <p class="text-stone-400 mt-2">Test your sorting knowledge. <span id="quiz-status"></span></p>
                </div>

                <div id="quiz-content">
                    <!-- Quiz structure will be rendered here by JS -->
                </div>

            </div>
        </section>

        <!-- Conclusion -->
        <section class="bg-gradient-to-br from-green-50 to-white rounded-2xl p-8 border border-green-100 shadow-sm">
            <h2 class="text-2xl font-bold text-green-900 mb-4">Summary and Way Forward</h2>
            <p class="text-green-900 leading-relaxed mb-6">
                In summary, Malaysia's recycling struggle is fundamentally a <strong>systemic failure</strong>, driven by infrastructure gaps, a legislative vacuum, and a significant cultural barrier. The 'Amah Syndrome' prevents the vital shift in mindset needed for high-quality segregation, while the inability of the system to manage even the most carefully sorted materials (as evidenced by the NGO cleanup paradox) kills public motivation. 
            </p>
            <p class="text-green-900 leading-relaxed font-medium">
                To bridge the widening gap between ambitious policy and negligible impact, we must move beyond symbolic poster campaigns. The solution requires multi-level action: establishing seamless, dedicated sorting facilities in every residential block; implementing granular educational standards targeting the <strong>specific cultural barrier of relying on cleaners</strong>; mandating <strong>Extended Producer Responsibility (EPR)</strong> to compel industry action; and, most importantly, giving the legislation the "teeth" it needs to hold both consumers and corporations responsible. Only through this holistic approach can we truly turn our mounting waste crisis into a sustainable opportunity.
            </p>
            
            <div class="mt-8 pt-6 border-t border-green-200/60 flex flex-col md:flex-row justify-between items-center gap-4 text-sm text-green-700/80">
                <div>
                    <strong>Key Sources:</strong> SWCorp Annual Data (2024), Act 672 Reports, Ministry of Housing and Local Government.
                </div>
                <button class="flex items-center gap-2 text-green-800 font-bold hover:text-green-600 transition-colors uppercase tracking-wide text-xs">
                    <i data-lucide="share-2" class="h-4 w-4"></i> Share Article
                </button>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-stone-900 text-stone-400 py-12 border-t border-stone-800">
        <div class="max-w-4xl mx-auto px-4 text-center">
            <div class="flex justify-center gap-2 text-stone-200 font-bold text-xl mb-4 items-center">
                <i data-lucide="recycle" class="h-6 w-6"></i>
                <span>Prepared by Ahmad Qaiyum</span>
            </div>
            <p class="mb-2 text-stone-500">
                Submission for JUE 200 - English I
            </p>
            <p class="text-xs text-stone-600">
                Matric No: 23306180 | Date of Submission: December 15, 2025
            </p>
        </div>
    </footer>

    <!-- --- JAVASCRIPT LOGIC --- -->
    <script>
        // --- DATA & STATE MANAGEMENT ---
        let wasteCount = 38000;
        let quizScore = 0;
        let showQuizResult = false;
        let currentQuestion = 0;
        let menuOpen = false;

        const colorMap = {
            'blue': { solid: 'bg-blue-600', faded: 'bg-blue-300' },
            'red': { solid: 'bg-red-600', faded: 'bg-red-300' },
            'yellow': { solid: 'bg-yellow-600', faded: 'bg-yellow-300' },
            'green': { solid: 'bg-green-600', faded: 'bg-green-300' },
            'indigo': { solid: 'bg-indigo-600', faded: 'bg-indigo-300' },
            'orange': { solid: 'bg-orange-600', faded: 'bg-orange-300' },
            'cyan': { solid: 'bg-cyan-600', faded: 'bg-cyan-300' },
        };

        const materialData = [
            { material: 'Paper', collected: 75, effectivelyRecycled: 68, color: 'blue' },
            { material: 'Plastic', collected: 60, effectivelyRecycled: 45, color: 'red' },
            { material: 'Glass', collected: 50, effectivelyRecycled: 42, color: 'yellow' },
            { material: 'Metal/E-Waste', collected: 85, effectivelyRecycled: 78, color: 'green' },
            { material: 'Textile', collected: 20, effectivelyRecycled: 10, color: 'indigo' },
            { material: 'Food Waste', collected: 90, effectivelyRecycled: 5, color: 'orange' }, 
            { material: 'Building Material', collected: 55, effectivelyRecycled: 48, color: 'cyan' },
        ];

        // Chart Data for Chart.js
        const chartYears = [2015, 2017, 2019, 2021, 2023, 2025, 2027, 2029, 2031, 2033, 2035];
        const myRate = [15, 18, 22, 28, 33, 35, 37, 38, 39, 39.5, 40]; // Malaysia Rate
        const targetRate = [20, 25, 30, 31, 32.5, 40, 45, 50, 50, 55, 55]; // National Target
        const sgRate = [60, 62, 65, 68, 70, 71, 72, 73, 74, 75, 76]; // Singapore
        const twRate = [55, 57, 59, 61, 63, 64, 65, 66, 67, 68, 69]; // Taiwan
        const jkRate = [75, 77, 79, 81, 83, 84, 85, 86, 87, 88, 89]; // Japan/Korea

        const quizQuestions = [
            {
                question: "You finish a greasy pizza. Can you recycle the box?",
                options: ["Yes, it's cardboard!", "No, grease contaminates fibers."],
                correct: 1,
                explanation: "Grease and oil cannot be separated from paper fibers, making the box unrecyclable. It often ruins the whole batch."
            },
            {
                question: "Do you need to rinse plastic bottles before recycling?",
                options: ["Yes, food residue is a contaminant.", "No, the plant washes it."],
                correct: 0,
                explanation: "Leftover liquids or food rot and contaminate other clean recyclables (like paper), sending the entire load to the landfill."
            },
            {
                question: "Is a broken drinking glass recyclable with glass bottles?",
                options: ["Yes, glass is glass.", "No, it melts at a different temp."],
                correct: 1,
                explanation: "Tempered glass (cookware, drinkware) melts at a much higher temperature than bottle glass, damaging recycling equipment."
            }
        ];


        // --- UTILITY FUNCTIONS ---
        // Helper to scroll to section
        window.scrollToSection = (id) => {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
            menuOpen = false;
            renderNav(); // Rerender nav to close mobile menu
        };


        // --- CHART.JS INITIALIZATION ---

        const initializeChart = () => {
            const ctx = document.getElementById('recyclingRateChartCanvas');
            if (!ctx) return;

            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: chartYears,
                    datasets: [
                        {
                            label: 'Malaysia Rate',
                            data: myRate,
                            borderColor: 'rgb(59, 130, 246)', 
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            borderWidth: 3,
                            tension: 0.3,
                            pointRadius: (context) => context.dataIndex === 4 ? 6 : 4,
                            pointBackgroundColor: (context) => context.dataIndex === 4 ? 'rgb(234, 88, 12)' : 'rgb(59, 130, 246)',
                        },
                        {
                            label: 'National Target',
                            data: targetRate,
                            borderColor: 'rgb(239, 68, 68)',
                            backgroundColor: 'transparent',
                            borderWidth: 2,
                            tension: 0.3,
                            borderDash: [6, 6],
                            pointRadius: 2,
                        },
                        {
                            label: 'Japan/Korea Avg',
                            data: jkRate,
                            borderColor: 'rgb(16, 185, 129)', 
                            backgroundColor: 'transparent',
                            borderWidth: 2,
                            tension: 0.3,
                            pointRadius: 2,
                        },
                         {
                            label: 'Singapore',
                            data: sgRate,
                            borderColor: 'rgb(124, 58, 237)', 
                            backgroundColor: 'transparent',
                            borderWidth: 2,
                            tension: 0.3,
                            pointRadius: 2,
                        },
                        {
                            label: 'Taiwan',
                            data: twRate,
                            borderColor: 'rgb(245, 158, 11)',
                            backgroundColor: 'transparent',
                            borderWidth: 2,
                            tension: 0.3,
                            pointRadius: 2,
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                usePointStyle: true,
                                padding: 20
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.dataset.label}: ${context.parsed.y.toFixed(1)}%`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            min: 10,
                            max: 90,
                            title: {
                                display: true,
                                text: 'Recycling Rate (%)'
                            },
                            ticks: {
                                callback: (value) => value + '%'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Year'
                            }
                        }
                    }
                }
            });
        };


        // --- COMPONENT RENDERING FUNCTIONS (HTML String Templates) ---
        
        // Function to create Lucide icons (must be called after main content is rendered)
        const getIcon = (name, className = 'h-6 w-6', stroke = 'currentColor') => {
            // Using a div placeholder here; lucide.createIcons() handles the actual SVG rendering later.
            return `<i data-lucide="${name}" class="${className}" style="stroke: ${stroke};"></i>`;
        };

        const NavLink = (to, label) => `
            <button 
                onclick="scrollToSection('${to}')"
                class="block w-full text-left px-4 py-2 text-gray-700 hover:bg-green-50 hover:text-green-600 transition-colors font-medium"
            >
                ${label}
            </button>
        `;

        const renderNav = () => {
            const navElement = document.getElementById('main-nav');
            if (!navElement) return;

            const navHtml = `
                <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="flex justify-between h-16 items-center">
                        <div class="flex items-center gap-2 text-green-700 font-bold text-xl tracking-tight">
                            ${getIcon('recycle', 'h-6 w-6')}
                            <span>Qaiyum Thoughts</span>
                        </div>
                        
                        <div class="hidden md:flex gap-8">
                            <button onclick="scrollToSection('intro')" class="text-sm font-semibold text-gray-600 hover:text-green-600 transition-colors">Introduction</button>
                            <button onclick="scrollToSection('reality')" class="text-sm font-semibold text-gray-600 hover:text-green-600 transition-colors">The Data</button>
                            <button onclick="scrollToSection('reasons')" class="text-sm font-semibold text-gray-600 hover:text-green-600 transition-colors">Root Causes</button>
                            <button onclick="scrollToSection('quiz')" class="text-sm font-semibold text-gray-600 hover:text-green-600 transition-colors">Quiz</button>
                        </div>

                        <button class="md:hidden p-2 text-gray-600" onclick="menuOpen = !menuOpen; renderNav();">
                            ${getIcon(menuOpen ? 'x' : 'menu')}
                        </button>
                    </div>
                </div>
                
                <!-- Mobile Menu -->
                ${menuOpen ? `
                    <div class="md:hidden bg-white border-b border-gray-200 shadow-xl animate-fade-in">
                        ${NavLink('intro', 'Introduction')}
                        ${NavLink('reality', 'The Data')}
                        ${NavLink('reasons', 'Root Causes')}
                        ${NavLink('quiz', 'Quiz')}
                    </div>
                ` : ''}
            `;
            navElement.innerHTML = navHtml;
        };


        const renderSunburstVisualizer = (data) => {
            const { material, collected, effectivelyRecycled, color } = data;
            const rejectionLoss = collected - effectivelyRecycled;
            const colors = colorMap[color] || { solid: 'bg-gray-600', faded: 'bg-gray-300' };
            
            const maxCollected = 90;
            const effectiveSizeRatio = effectivelyRecycled / maxCollected;
            const innerSize = 65; 
            const innerCircleDiameter = innerSize * effectiveSizeRatio;

            return `
                <div class="flex flex-col items-center text-center p-4 bg-white hover:bg-gray-50 rounded-xl shadow-md transition-shadow duration-300 border border-gray-100">
                    <div class="relative w-32 h-32 flex items-center justify-center mb-3">
                        
                        <!-- 1. Outer Ring (Total Potential - Fixed background) -->
                        <div class="absolute w-full h-full rounded-full bg-gray-100"></div>

                        <!-- 2. Collected Ring (Faded Color) -->
                        <div 
                            class="absolute w-[90%] h-[90%] rounded-full opacity-60 ${colors.faded} flex items-center justify-center"
                            title="Collected: ${collected}%"
                        >
                        </div>
                        
                        <!-- 3. Effectively Recycled Inner Circle (Solid Color) -->
                        <div 
                            class="absolute rounded-full shadow-2xl flex items-center justify-center ${colors.solid} text-white font-bold transition-all duration-500"
                            style="width: ${innerCircleDiameter}px; height: ${innerCircleDiameter}px;"
                            title="Effectively Recycled: ${effectivelyRecycled}%"
                        >
                            <span class="text-xl leading-none">${effectivelyRecycled}%</span>
                        </div>

                        <!-- Rejection Loss Label -->
                        <div class="absolute top-0 right-0 transform translate-x-1 -translate-y-1 bg-red-600 text-white text-xs font-bold px-2 py-0.5 rounded-full shadow-lg border border-red-800">
                            -${rejectionLoss}%
                        </div>
                    </div>
                    <p class="text-lg font-bold text-gray-800">${material}</p>
                    <p class="text-sm text-gray-500 mt-1">
                        ${collected}% Collected
                    </p>
                </div>
            `;
        };

        const renderMaterialVisuals = () => {
            const container = document.getElementById('material-visualizer');
            if (container) {
                container.innerHTML = materialData.map(renderSunburstVisualizer).join('');
            }
        };

        const renderQuizContent = () => {
            const container = document.getElementById('quiz-content');
            const statusContainer = document.getElementById('quiz-status');
            
            if (!container || !statusContainer) return;

            statusContainer.innerHTML = `Question ${currentQuestion + 1} of ${quizQuestions.length}`;

            if (showQuizResult) {
                container.innerHTML = `
                    <div class="text-center py-8 animate-fade-in bg-stone-800 rounded-2xl border border-stone-700">
                        <div class="inline-flex p-4 rounded-full bg-green-500/20 text-green-400 mb-6 ring-1 ring-green-500/50">
                            <i data-lucide="${quizScore === 3 ? 'check-circle-2' : 'alert-triangle'}" class="h-10 w-10"></i>
                        </div>
                        <h3 class="text-3xl font-bold mb-4">You scored ${quizScore} / 3</h3>
                        <p class="text-stone-300 text-lg mb-8 max-w-md mx-auto leading-relaxed">
                            ${quizScore === 3 
                                ? "Excellent! You understand the nuances of contamination. You are a true recycler." 
                                : "You might be 'wish-cycling'. Remember: Clean, Dry, and Separated is the golden rule."}
                        </p>
                        <button 
                            onclick="window.resetQuiz()"
                            class="bg-white text-stone-900 px-8 py-3 rounded-full font-bold hover:bg-stone-200 transition-colors shadow-lg hover:shadow-xl"
                        >
                            Retake Quiz
                        </button>
                    </div>
                `;
            } else {
                const currentQuiz = quizQuestions[currentQuestion];
                container.innerHTML = `
                    <div class="bg-stone-800/50 backdrop-blur-sm p-1 rounded-2xl border border-stone-700">
                        <div class="bg-stone-800 p-8 rounded-xl">
                            <h4 class="text-xl font-medium mb-8 leading-snug">${currentQuiz.question}</h4>
                            <div class="space-y-4">
                                ${currentQuiz.options.map((option, idx) => `
                                    <button
                                        onclick="window.handleQuizAnswer(${idx})"
                                        class="w-full py-4 px-6 rounded-xl bg-stone-700 hover:bg-green-600 hover:text-white transition-all text-left flex justify-between items-center group border border-stone-600 hover:border-green-500"
                                    >
                                        <span class="font-medium">${option}</span>
                                        <i data-lucide="arrow-right" class="opacity-0 group-hover:opacity-100 transition-all transform group-hover:translate-x-1"></i>
                                    </button>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                `;
            }
        };


        // --- INTERACTION HANDLERS ---

        window.handleQuizAnswer = (optionIndex) => {
            const correct = quizQuestions[currentQuestion].correct;
            if (optionIndex === correct) {
                quizScore += 1;
            }
            
            if (currentQuestion < quizQuestions.length - 1) {
                setTimeout(() => {
                    currentQuestion += 1;
                    renderQuizContent();
                    lucide.createIcons();
                }, 800);
            } else {
                setTimeout(() => {
                    showQuizResult = true;
                    renderQuizContent();
                    lucide.createIcons();
                }, 800);
            }
        };

        window.resetQuiz = () => {
            quizScore = 0;
            currentQuestion = 0;
            showQuizResult = false;
            renderQuizContent();
            lucide.createIcons();
        };

        // --- COUNTER & MAIN INITIALIZATION ---

        // Start the waste counter interval
        const startCounter = () => {
            let currentWaste = 38000;
            const counterElement = document.getElementById('waste-counter');
            if (!counterElement) return;

            // Update immediately
            counterElement.textContent = currentWaste.toLocaleString();

            const intervalId = setInterval(() => {
                currentWaste += 10;
                if (counterElement) {
                    counterElement.textContent = currentWaste.toLocaleString();
                } else {
                    clearInterval(intervalId);
                }
            }, 500);
        };


        // Main function to initialize all dynamic components
        const mainInit = () => {
            // 1. Render all lucide icons in the static body content
            lucide.createIcons();
            
            // 2. Initialize the dynamic navigation bar
            renderNav();

            // 3. Initialize Chart.js graph
            initializeChart();

            // 4. Render the material sunburst visualizer
            renderMaterialVisuals();
            
            // 5. Initialize the quiz
            renderQuizContent();

            // 6. Start the live waste counter
            startCounter();
        };

        // Wait for the DOM to be fully loaded before starting dynamic components
        window.addEventListener('load', mainInit);
    </script>
</body>
</html>
